(function($){"use strict";$(function(){var getCounter=function(){$.ajax({type:'POST',url:'/api/widgetpreview/stats/',dataType:'json',timeout:10000,success:function(result){if(result.counter>1){var box=$('.counter-info');box.find('strong').text(result.counter);box.show();}},error:function(){}});};getCounter();function toggleNewHovers(show){var newHovers=$('.new-hover'),squareCrop=$('.square-crop-box');if(show==true){newHovers.show();squareCrop.show();}else{newHovers.hide();squareCrop.hide();$('select[name="hoverEffect"]').val('none');}}
$(document).on('change','.repeater-item select[name$="[type]"]',function(){var t=$(this),selected=t.children(':selected'),container=t.closest('.repeater-content');container.find('.type-option').hide();container.find('.'+selected.attr('data-options')).show();if(t.val()=='columns'){toggleNewHovers(false);}else{toggleNewHovers(true);}
if(t.val()=='slideshow'){container.find('[name$="[usePreloader]"]').attr('checked',false);}});$(document).on('change keyup','input[name$="[rows]"],input[name$="[columns]"],select[name$="[type]"]',function(event){try{var parent=$(this).closest('.repeater-item'),numberOfPhotos=parseInt(parent.find('input[name$="[rows]"]').val())*parseInt(parent.find('input[name$="[columns]"]').val()),widgetType=parent.find('select[name$="[type]"]').val();if(widgetType==='grid'){parent.find('input[name$="[numberOfPhotos]"]').val(numberOfPhotos);}}catch(exception){}});$('input[name$="[rows]"]').trigger('change');$('.repeater-item select[name$="[type]"]').trigger('change');$(document).on('change','.repeater-item input[name$="[captions][show]"]',function(){var t=$(this),container=t.closest('.form__item'),trimToContainer=container.next('.form__item');if(t.attr('checked')){trimToContainer.show();}else{trimToContainer.hide();}
if(t.attr('checked')){toggleNewHovers(false);}else{toggleNewHovers(true);}});$('.repeater-item input[name$="[captions][show]"]').trigger('change');$(document).on('input change','.repeater-item input[name$="[captions][fontSize]"]',function(){var t=$(this),label=$('label[for="'+t.attr('id')+'"]');label.text('Font size - '+t.val()+' REM');});$('.repeater-item input[name$="[captions][fontSize]"]').trigger('input');$(document).on('change','.repeater-item select, .repeater-item input',function(){var t=$(this),repeaterItem=t.closest('.repeater-item'),type=repeaterItem.find('select[name$="[type]"]').val(),hoverEffect=repeaterItem.find('select[name$="[hoverEffect]"]').val(),showCaptions=repeaterItem.find('input[name$="[captions][show]"]')[0].checked,fontSizeContainer=repeaterItem.find('.type-fontsize');if(type==='columns'||hoverEffect==='likes_comments'||hoverEffect==='caption_slide_up'||showCaptions===true){fontSizeContainer.removeClass('form__item--hidden');}else{fontSizeContainer.addClass('form__item--hidden');}}).trigger('change');$(document).on('input change','.repeater-item input[name$="[slider][speed]"]',function(){var t=$(this),label=$('label[for="'+t.attr('id')+'"]');label.text('Change slide after - '+(parseFloat(t.val())/1000)+' second(s)');});$('.repeater-item input[name$="[slider][speed]"]').trigger('input');$(document).on('change','[name="widget[account]"]',function(){var t=$(this),customUsername=$('.form__item--custom-account');if(t.val()==='custom'){customUsername.show();}else{customUsername.hide();}});$('[name="widget[account]"]').trigger('change');var form=$('.wp-instansive-form'),resultElement=$('.wp-instansive-form pre'),proInfo=$('.pro-panel.info');$(document).on('change','.repeater-item select[name$="[hoverEffect]"]',function(){var t=$(this),selected=t.children(':selected');if(selected.hasClass('pro-type')){t.parent().addClass('pro-option');}else{t.parent().removeClass('pro-option');}}).trigger('change');$(document).on('click','.repeater-add',function(event){event.preventDefault();event.target.blur();var item=$(this).closest('.repeater-item'),clone=item.clone();clone.insertAfter(item);onListUpdate();});$(document).on('click','.repeater-delete',function(event){event.preventDefault();event.target.blur();var itemsCount=$('.repeater .repeater-item').length;if(itemsCount>1){$(this).closest('.repeater-item').remove();onListUpdate();}});var onListUpdate=function(){var i=0;var repeaterItems=$('.repeater-item');var nameCounter=0;repeaterItems.each(function(index,item){var $item=$(item);$item.find('[name^="widget[breakpoints]"]').each(function(item_index,item_item){var $ii=$(item_item);var name=$ii.attr('name').split('[');name[2]=nameCounter+']';$ii.attr('name',name.join('['));var id=$ii.attr('id').split('[');id[2]=nameCounter+']';$ii.attr('id',id.join('['));});$item.find('[for^="widget[breakpoints]"]').each(function(item_index,item_item){var $ii=$(item_item);var forAttribute=$ii.attr('for').split('[');forAttribute[2]=nameCounter+']';$ii.attr('for',forAttribute.join('['));});nameCounter++;});var itemsCount=repeaterItems.length;if(itemsCount>1){$('.global-settings').hide();$('.multi-settings').show();$('.global-settings').eq(0).show();$('.multi-settings').eq(0).hide();}else{$('.multi-settings').hide();$('.global-settings').show();}}
onListUpdate();setInterval(function(){if(window.instansive){window.instansive.refresh();}},700);});}(jQuery));