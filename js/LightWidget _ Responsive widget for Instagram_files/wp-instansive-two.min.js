!function(e,t){"function"==typeof define&&define.amd?define([],function(){return e.svg4everybody=t()}):"object"==typeof module&&module.exports?module.exports=t():e.svg4everybody=t()}(this,function(){function e(e,t,n){if(n){var r=document.createDocumentFragment(),i=!t.hasAttribute("viewBox")&&n.getAttribute("viewBox");i&&t.setAttribute("viewBox",i);for(var a=n.cloneNode(!0);a.childNodes.length;)r.appendChild(a.firstChild);e.appendChild(r)}}function t(t){t.onreadystatechange=function(){if(4===t.readyState){var n=t._cachedDocument;n||(n=t._cachedDocument=document.implementation.createHTMLDocument(""),n.body.innerHTML=t.responseText,t._cachedTarget={}),t._embeds.splice(0).map(function(r){var i=t._cachedTarget[r.id];i||(i=t._cachedTarget[r.id]=n.getElementById(r.id)),e(r.parent,r.svg,i)})}},t.onreadystatechange()}function n(n){function i(){for(var n=0;n<p.length;){var s=p[n],d=s.parentNode,c=r(d),u=s.getAttribute("xlink:href")||s.getAttribute("href");if(!u&&o.attributeName&&(u=s.getAttribute(o.attributeName)),c&&u){if(a)if(!o.validate||o.validate(u,c,s)){d.removeChild(s);var l=u.split("#"),m=l.shift(),f=l.join("#");if(m.length){var w=g[m];w||(w=g[m]=new XMLHttpRequest,w.open("GET",m),w.send(),w._embeds=[]),w._embeds.push({parent:d,svg:c,id:f}),t(w)}else e(d,c,document.getElementById(f))}else++n,++h}else++n}(!p.length||p.length-h>0)&&v(i,67)}var a,o=Object(n),s=/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/,d=/\bAppleWebKit\/(\d+)\b/,c=/\bEdge\/12\.(\d+)\b/,u=/\bEdge\/.(\d+)\b/,l=window.top!==window.self;a="polyfill"in o?o.polyfill:s.test(navigator.userAgent)||(navigator.userAgent.match(c)||[])[1]<10547||(navigator.userAgent.match(d)||[])[1]<537||u.test(navigator.userAgent)&&l;var g={},v=window.requestAnimationFrame||setTimeout,p=document.getElementsByTagName("use"),h=0;a&&i()}function r(e){for(var t=e;"svg"!==t.nodeName.toLowerCase()&&(t=t.parentNode););return t}return n}),document.addEventListener("DOMContentLoaded",function(){if(null===document.querySelector(".wp-instansive-form"))return!1;var e=document.querySelector(".generate-preview"),t=document.querySelector(".wp-instansive-form .download-code"),n=document.querySelector(".wp-instansive-form .instansive-ajax-response");e.addEventListener("click",function(){if("yes"===this.dataset.pending)return!1;this.dataset.pending="yes",document.querySelector(".widget-preview__resizeable-box").classList.add("preloader"),n.innerHTML="",t&&t.classList.remove("enabled");var r=document.querySelector(".wp-instansive-form"),i=new FormData(r);fetch("/get-preview",{method:"post",body:i}).then(function(e){if(e.ok)return e;var t=new Error(e.statusText);throw t.response=e,t}).then(function(e){return e.json()}).then(function(r){document.querySelector(".widget-preview iframe").setAttribute("src",r.iframeSrc),n.innerHTML="Widget generated!",t&&t.classList.add("enabled"),e.dataset.pending="",document.querySelector(".widget-preview__resizeable-box").classList.remove("preloader")}).catch(function(r){r.response.json().then(function(r){var i="";for(var a in r.errors)r.errors.hasOwnProperty(a)&&(i+=r.errors[a]+"\n");n.innerHTML=i,t&&t.classList.remove("enabled"),e.dataset.pending="",document.querySelector(".widget-preview__resizeable-box").classList.remove("preloader")})})});var r=document.querySelector('.page--frontpage .widget-generator .form__input[name="widget[account]"]');if(null!==r&&""!==r.value){var i;document.createEvent?(i=document.createEvent("HTMLEvents"),i.initEvent("click",!0,!0)):(i=document.createEventObject(),i.eventType="click"),i.eventName="click",document.createEvent?e.dispatchEvent(i):e.fireEvent("on"+i.eventType,i)}var a=document.querySelector(".edit-widget-btn");a&&a.addEventListener("click",function(){if("yes"===this.dataset.pending)return!1;this.dataset.pending="yes",document.querySelector(".widget-preview__resizeable-box").classList.add("preloader"),n.innerHTML="";var e=document.querySelector(".wp-instansive-form"),t=new FormData(e);fetch("/update-widget-settings",{method:"post",body:t,credentials:"same-origin"}).then(function(e){if(e.ok)return e;var t=new Error(e.statusText);throw t.response=e,t}).then(function(e){return e.json()}).then(function(e){document.querySelector(".widget-preview iframe").setAttribute("src",e.iframeSrc),n.innerHTML="Changes saved",document.querySelector(".widget-preview__resizeable-box").classList.remove("preloader"),a.dataset.pending=""}).catch(function(e){e.response.json().then(function(e){var t="";if("string"==typeof e.errors)t=e.errors;else for(var r in e.errors)e.errors.hasOwnProperty(r)&&(t+=e.errors[r]+"\n");n.innerHTML=t,a.dataset.pending="",document.querySelector(".widget-preview__resizeable-box").classList.remove("preloader")})})})},!1);var Tagged=function(e){void 0!==e&&(this.select=e,this.tagContainer=null,this.input=null,this.tags=[],this.tagId=0,this.init())};Tagged.prototype={init:function(){this._build(),this._setupListeners(),this._setInitialTags()},_build:function(){this.tagContainer=document.createElement("ul"),this.tagContainer.classList.add("tagged"),this.input=document.createElement("input"),this.input.setAttribute("type","text"),this.input.classList.add("tagged__tag-input"),this.tagContainer.appendChild(this.input),this.select.parentNode.insertBefore(this.tagContainer,this.select.nextSibling)},_setupListeners:function(){var e=this;this.tagContainer.addEventListener("click",function(){e.input.focus()}),this.input.addEventListener("keydown",function(t){var n=t.which||t.keyCode;13!==n&&32!==n||e.addTag(e.input.value,void 0)},!1),this.input.addEventListener("keyup",function(t){var n=t.which||t.keyCode;188===n&&e.addTag(e.input.value,void 0),8===n&&""===e.input.value&&e._editLast()},!1),this.input.addEventListener("blur",function(){e.addTag(e.input.value,void 0)})},_setInitialTags:function(){var e=this;[].forEach.call(this.select.querySelectorAll("option"),function(t){if(t.hasAttribute("selected")){var n=e._parseTag(t.value);""!==n&&e.addTag(n,t)}})},addTag:function(e,t){if(e=this._parseTag(e),""!==e){this.input.value="",this.tagId=this.tagId+1;var n;void 0!==t?(t.dataset.tagId=this.tagId,n=t):n=this._createOption(this.tagId,e);var r=this._createTag(this.tagId,e);this.tags=this.tags.concat({tagId:this.tagId,tag:e,optionEl:n,tagEl:r});var i=this;setTimeout(function(){i.input.focus()},10)}},_parseTag:function(e){var t=e.replace(/!|@|#|\$|%|\^|&|\*|\(|\)|\[|]|\{|}|"|'|\\|\/'/g,"");return t=t.replace(/,/g,""),t=t.replace(/\s+/g,"")},_createOption:function(e,t){var n=document.createElement("option");return n.setAttribute("value",t),n.setAttribute("selected","selected"),n.dataset.tagId=e,n.innerHTML=t,this.select.appendChild(n),n},_createTag:function(e,t){var n=document.createElement("li");n.innerHTML="#"+t,n.classList.add("tagged__tag");var r=document.createElement("button");r.dataset.tagId=e,r.classList.add("tagged__remove");var i=this;return r.addEventListener("click",function(e){var t=parseInt(e.target.dataset.tagId);i._removeTag(t)}),n.appendChild(r),this.select.parentNode.insertBefore(this.tagContainer,this.select.nextSibling),this.tagContainer.insertBefore(n,this.input),n},_removeTag:function(e){var t=this.tags.filter(function(t){return t.tagId===e})[0];return t.optionEl.parentNode.removeChild(t.optionEl),t.tagEl.parentNode.removeChild(t.tagEl),this.tags=this.tags.filter(function(t){return t.tagId!==e}),t},_editLast:function(){var e=this.tags[this.tags.length-1];if(void 0!==e){var t=e.tagId,n=this._removeTag(t);this.input.value=n.tag}}},document.addEventListener("DOMContentLoaded",function(){new Tagged(document.querySelectorAll(".tagged__select")[0])}),document.addEventListener("DOMContentLoaded",function(){svg4everybody();var e=document.querySelector(".instagram-username");if(null!==e){var t=function(){e.value=e.value.replace("https://instagram.com/","").replace("https://www.instagram.com/","").replace("http://instagram.com/","").replace("http://www.instagram.com/","").replace("/","").toLowerCase()};e.addEventListener("change",t),e.addEventListener("blur",t),e.addEventListener("paste",t)}}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".download-code");return null!==e&&(e.addEventListener("click",function(){if("yes"===this.dataset.pending)return!1;this.dataset.pending="yes";var t=document.querySelector(".wp-instansive-form .instansive-ajax-response"),n=document.querySelector(".wp-instansive-form"),r=new FormData(n);document.querySelector(".widget-generator").classList.add("preloader"),fetch("/get-widget-code",{method:"post",body:r,credentials:"same-origin"}).then(function(e){if(e.ok)return e;var t=new Error(e.statusText);throw t.response=e,t}).then(function(e){return e.json()}).then(function(n){if(n.status===!1)throw new Error(n.error_message||n.data);document.querySelector(".embed-code__contents").innerHTML=n.widgetCode;var r=document.querySelector(".widget-preview .lightwidget-widget");document.querySelector(".download-screen__widget").appendChild(r),t.innerHTML="",document.querySelector(".widget-generator").classList.remove("preloader"),[].forEach.call(document.querySelectorAll(".upgrade-button-link-widget-id"),function(e){e.setAttribute("href","/add-on/widget-upgrade?widgetId="+n.widgetId)}),document.querySelector(".widget-generator").classList.add("widget-generator--show-overlay"),document.querySelector(".widget-generator").scrollIntoView({behavior:"smooth"}),e.dataset.pending=""}).catch(function(n){n.response.json().then(function(n){var r="";for(var i in n.errors)n.errors.hasOwnProperty(i)&&(r+=n.errors[i]+"\n");t.innerHTML=r,e.classList.remove("enabled"),e.dataset.pending="",document.querySelector(".widget-generator").classList.remove("preloader")})})}),[].forEach.call(document.querySelectorAll(".close-download-screen"),function(e){e.addEventListener("click",function(e){e.preventDefault();var t=document.querySelector(".download-screen__widget .lightwidget-widget");document.querySelector(".widget-preview__resizeable-box").appendChild(t),document.querySelector(".widget-generator").classList.remove("widget-generator--show-overlay")})}),void document.querySelector(".download-screen__tutorials").addEventListener("click",function(e){e.preventDefault(),document.querySelector(".integrations").scrollIntoView({behavior:"smooth"})}))},!1);